<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Discover how to make your web site better &mdash; FrontendTest</title>
  <meta name="description" content="This free tool runs a suite of tests and returns a detailed, prioritized list of what you can do to make your site better. Optimize for an evolving web.">
  <meta name="keywords" content="html5, css3, JavaScript, semantic html, minification, cross-browser compatibility, deprecated elements, broken links, css specificity, correctly sized images, favicon, javascript pseudo-protocol, duplicate IDs, optimized graphics, pngs vs gifs, blocking scripts, html5 doctype, font-size, font-face, too many inline styles, unused code">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="{{ asset('css/style.css') }}">
</head>
<body>

<!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->

<!--
  <header>
	<h1>FrontendTest</h1><div class="indicatorLights"><span class="indicatorGreen">&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;</span><span class="indicatorOrange">&bull;</span><span class="indicatorRed">&bull;&bull;&bull;</span></div>
  </header>
-->
  <header>
	<img src="{{ asset('img/logo.png') }}" width="338" height="70" alt="FrontendTest for improving web sites">
  </header>

  <div role="main" class="main">
	
	<div class="formColumn">				
		<form id="signup">
			<div class="formRow">
		  	 <label for="url">Web site to test<!-- (http://...)--></label><br>
				<input type="url" name="url" id="url" placeholder="http://www.yourwebsite.com" autofocus="autofocus" style="width: 380px">
			</div>
			<div class="formRow">
		  	 <label for="email">Email to send report</label> (same domain)<br>
				<input type="email" name="email" id="email" placeholder="email@yourwebsite.com" style="width: 380px">
			</div>
				<input type="checkbox" name="wantsMoreHelp" id="wantsMoreHelp">&nbsp; <label for="wantsMoreHelp" class="smallLabel">Iâ€™m interested in having a web expert review my site</label><br>
			<input type="submit" class="button" value="Get Report">	<img src="{{ asset('img/loading.gif') }}" width="40" height="40" alt="loading" class="loading" style="margin-bottom:10px;margin-left:10px; display:none;">
					
		</form>				
		<p id="confirmFtRequest">&nbsp;<br>&nbsp;</p>			
	</div>
	
	<div class="infoColumn">
		
		<h2 class="marginBottom">Find out how to make your web site better, faster, and future-proof</h2>
		
		<h3>Discover</h3>
		<ul>
			<li>Poorly optimized resources</li>
			<li>Errors and unused code</li>
			<li>Out-of-date practices</li>
			<li>Improvements for mobile</li>
	 	</ul>		
	
	<!--<p><span id="whyTest" class="whyTest fauxLink">Why test?</span></p>-->
	
	<p>
  	<b>Questions?</b> &nbsp;Email <a href="mailto:support@frontendtest.com?subject=questions">support@frontendtest.com</a>
  	</p>

	<p>
  	<form id="newsletterSignup" class="newsletterSignup">

  	  	<label for="email" class="newsletterSignupLabel">FrontendTest news signup</label><br>
		<input type="email" name="email" id="newsletterSignupField" placeholder="email@example.com" class="newsletterSignupField" style="width: 200px" /> 

  	<input type="image" src="{{ asset('img/ready.png') }}" width="61" height="40" alt="Paper airplane submit button" id="submitAirplane" class="imgButton" style="vertical-align: middle"> 
    <span class="newsletterFormSubmitMsg"></span>
  	</form>
	</p>
		
	</div>	
</div>
<footer>
	&copy;2012 FrontendTest.com
</footer>

<!-- <script src="{{ asset('js/libs/modernizr-2.5.3.min.js') }}" defer="defer"></script> -->
  
<!-- local -->
<!--
<script type="text/javascript" src="http://use.typekit.com/jif1lwz.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
-->
<!-- prod -->

<script type="text/javascript" src="http://use.typekit.com/cfs0wvw.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>


  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="{{ asset('js/libs/jquery-1.7.1.min.js') }}"><\/script>')</script>
  
  <script src="{{ asset('js/jquery.validate.min.js') }}"></script>

  <script src="{{ asset('js/plugins.js') }}"></script>
 
  <script>
    var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));

	jQuery.extend(jQuery.validator.messages, {
	    url: "Please enter a valid URL, inluding http:// or https://"
	});
		 
    $(document).ready(function() {		
		
    	$('#submitAirplane').hover(
		  function () {
			$(this).attr('src','{{ asset('img/set.png') }}');
		  }, 
		  function () {
			$(this).attr('src','{{ asset('img/ready.png') }}');
		  }
		);

        $("#newsletterSignup").validate({
            rules: {
                email: {
				  required: true,
				  email: true
				}
            },	
			submitHandler: function() {
				$('.newsletterFormSubmitMsg').html('sent. thank you');
				$('#newsletterSignupField').css('color','gray');				
				$.ajax({
				  type: "POST",
				  url: "{{ path('_newsletter_email') }}",
				  data: "email=" + $('#newsletterSignupField').val(),
				  success: function(data) {
					//success msg optimistically shown
				  }
				});		
				//form.submit();
			}
        });
		
        $("#signup").validate({
            rules: {
                url: {
				  required: true,
				  url: true
				},
                email: {
				  required: true,
				  email: true
				}
            },	
			submitHandler: function() {	
				$('.loading').show();
				var confirmFtRequestMsg = '<span class="formSubmittedMsg">Thanks! A detailed report will be sent to ' + $('#email').val()+ '.</span><br>Email any questions to <a href="mailto:support@frontendtest.com?subject=submit">support@frontendtest.com</a>.';
				// if domains do not match, customize message
				var domain =  '@'+$('#url').val().substr(2 + $('#url').val().indexOf('//')).replace('www.','');
				domain = domain.substr(0, domain.indexOf('/'));

				if ($('#email').val().indexOf(domain) == -1) { 
					var confirmFtRequestMsg = 'Request submitted. <span class="formSubmittedMsgAlert">Note: for an automatic report, the email address and site domains must match.</span> To override, please email <a href="mailto:support@frontendtest.com?subject=override">support@frontendtest.com</a>.';
				} 							
				$.ajax({
				  type: "POST",
				  url: "{{ path('_ft_request_go') }}",
				  data: $("#signup").serialize(),
				  success: function(data) {
				  	//if(data=='true') {
						$('#confirmFtRequest').html(confirmFtRequestMsg);
						$('#confirmFtRequest').show();				
						$('.loading').hide();			
					//}
				  }	
				});							
				//form.submit();
			}
        });


    });    
 
  </script>
</body>
</html>
